<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Provider Login - Task Masters</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body.dark-mode { background: #0a0e1a; color: #ffffff; }
        body.dark-mode .modern-navbar { background: rgba(20, 40, 80, 0.95) !important; }
        body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4 { color: #ffffff; }
        body.dark-mode p, body.dark-mode span, body.dark-mode label { color: #e0e8ff; }
        body.dark-mode .login-container, body.dark-mode form { background: rgba(20, 40, 80, 0.4); border: 1px solid rgba(102, 126, 234, 0.3); }
        body.dark-mode input { background: rgba(30, 50, 90, 0.4); color: #ffffff; border: 2px solid rgba(102, 126, 234, 0.4); }
        body.dark-mode input:focus { border-color: rgba(102, 126, 234, 0.8); background: rgba(30, 50, 90, 0.5); }
        body.dark-mode .footer { background: rgba(15, 30, 60, 0.5); border-top: 1px solid rgba(102, 126, 234, 0.3); }
        body.dark-mode .footer h3, body.dark-mode .footer h4, body.dark-mode .footer p, body.dark-mode .footer a { color: #e0e8ff; }
        body.dark-mode [style*="background: white"], body.dark-mode [style*="background:white"] { background: rgba(20, 40, 80, 0.4) !important; }
    </style>
    <script>
        (function() {
            try {
                const custSettings = JSON.parse(localStorage.getItem('customerSettings') || '{}');
                const provSettings = JSON.parse(localStorage.getItem('providerSettings') || '{}');
                if (custSettings.darkMode === true || provSettings.darkMode === true) {
                    document.documentElement.classList.add('dark-mode');
                    document.body.classList.add('dark-mode');
                }
            } catch(e) {}
        })();
    </script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html"><h2>üéØ Task Masters</h2></a>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="index.html">Home</a>
                <a href="services-browse.html">Services</a>
                <a href="index.html#about">About</a>
                <a href="customer-dashboard.html" class="btn-provider" id="customerBtn" style="background: #28a745; display: none;">Customer Dashboard</a>
                <button class="btn-login" id="loginBtn" onclick="window.location.href='login.html'" style="padding: 12px 30px; font-size: 16px;">Login</button>
            </div>
        </div>
    </nav>

    <!-- Provider Login Section -->
    <section class="provider-login-section">
        <div class="login-container">
            <div class="login-box">
                <h1>Service Provider Portal</h1>
                <p class="subtitle">Login or register to start earning</p>

                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab-btn active" onclick="showTab('login')">Login</button>
                    <button class="tab-btn" onclick="showTab('register')">Register</button>
                </div>

                <!-- Login Form -->
                <div id="loginTab" class="tab-content active">
                    <form class="provider-form" onsubmit="handleProviderLogin(event)">
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" id="providerEmail" required placeholder="your@email.com" />
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="providerPassword" required placeholder="Enter your password" />
                        </div>
                        <div class="form-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="providerRememberMe" /> Remember me
                            </label>
                            <a href="#" class="forgot-link">Forgot password?</a>
                        </div>
                        <button type="submit" class="btn-submit-full">Login to Dashboard</button>
                    </form>
                </div>

                <!-- Register Form -->
                <div id="registerTab" class="tab-content">
                    <div style="text-align: center; padding: 40px 20px;">
                        <h2 style="margin-bottom: 15px;">Ready to Join Task Masters?</h2>
                        <p style="margin-bottom: 25px; color: #7f8c8d;">Complete our detailed registration form to become a verified service provider</p>
                        <button type="button" class="btn-submit-full" onclick="window.location.href='service-provider-register.html'" style="max-width: 400px; margin: 0 auto;">
                            Complete Registration Form
                        </button>
                        <p class="info-text" style="margin-top: 20px;">‚úì 0% Commission from us ‚Ä¢ ‚úì Flexible schedule ‚Ä¢ ‚úì Grow your business</p>
                    </div>
                </div>
            </div>

            <!-- Benefits Section -->
            <div class="benefits-box">
                <h2>Why Join Task Masters?</h2>
                <div class="zero-commission-highlight">
                    <h3>üéâ 0% Commission Platform</h3>
                    <p>We don't take any commission. Payment processors may charge standard processing fees.</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üí∞</div>
                    <div>
                        <h3>Earn More</h3>
                        <p>Set your own rates and maximize your earnings</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üìÖ</div>
                    <div>
                        <h3>Flexible Hours</h3>
                        <p>Work when you want, where you want</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üéØ</div>
                    <div>
                        <h3>Steady Work</h3>
                        <p>Access to thousands of customers daily</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üì±</div>
                    <div>
                        <h3>Easy App</h3>
                        <p>Manage bookings from your phone</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials-section">
        <h2 class="section-title">What Providers Say</h2>
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <p>"Task Masters has helped me grow my business and reach more customers than ever before!"</p>
                <div class="testimonial-author">
                    <strong>Service Provider</strong>
                    <span>Plumber ‚Ä¢ Toronto</span>
                </div>
            </div>
            <div class="testimonial-card">
                <p>"The flexible schedule lets me balance work and personal commitments perfectly."</p>
                <div class="testimonial-author">
                    <strong>Service Provider</strong>
                    <span>Tutor ‚Ä¢ Vancouver</span>
                </div>
            </div>
            <div class="testimonial-card">
                <p>"Great platform with reliable customers and prompt payments. Highly recommend!"</p>
                <div class="testimonial-author">
                    <strong>Service Provider</strong>
                    <span>Electrician ‚Ä¢ Montreal</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>üéØ Task Masters</h3>
                <p>Your trusted service marketplace</p>
            </div>
            <div class="footer-section">
                <h4>Company</h4>
                <a href="index.html#about">About Us</a>
                <a href="careers.html">Careers</a>
                <a href="index.html">Press</a>
            </div>
            <div class="footer-section">
                <h4>Support</h4>
                <a href="help.html">Help Center</a>
                <a href="safety.html">Safety</a>
                <a href="terms.html">Terms of Service</a>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <a href="contact.html">Email Us</a>
                <a href="contact.html">Call: 1800-TASK-HELP</a>
                <a href="contact.html">Live Chat</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Task Masters. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Provider Login Function
        function handleProviderLogin(event) {
            event.preventDefault();
            console.log('üîç Login function called');
            
            const email = document.getElementById('providerEmail')?.value;
            const password = document.getElementById('providerPassword')?.value;
            const rememberMe = document.getElementById('providerRememberMe')?.checked || false;
            
            console.log('Email:', email);
            console.log('Password length:', password?.length);
            
            if (!email || !password) {
                alert('‚ùå Please enter both email and password');
                return false;
            }
            
            // Check if provider exists in localStorage
            const storedProviders = JSON.parse(localStorage.getItem('providerUsers') || '[]');
            console.log('Stored providers count:', storedProviders.length);
            
            const provider = storedProviders.find(p => p.email === email);
            
            if (!provider) {
                alert('‚ùå No account found with this email. Please register first.');
                return false;
            }
            
            if (provider.password !== password) {
                alert('‚ùå Incorrect password. Please try again.');
                return false;
            }
            
            // Save provider data and login state
            localStorage.setItem('providerProfile', JSON.stringify(provider));
            localStorage.setItem('providerLoggedIn', 'true');
            
            console.log('‚úÖ Login successful, redirecting...');
            alert('‚úÖ Login successful! Redirecting to dashboard...');
            
            // Redirect to dashboard
            setTimeout(() => {
                window.location.href = 'provider.html';
            }, 500);
            
            return false;
        }
        
        // Provider Register Function
        function handleProviderRegister(event) {
            event.preventDefault();
            console.log('üîç Register function called');
            
            // Get form values
            const fullName = document.getElementById('regFullName')?.value;
            const email = document.getElementById('regEmail')?.value;
            const phone = document.getElementById('regPhone')?.value;
            const password = document.getElementById('regPassword')?.value;
            const category = document.getElementById('regCategory')?.value || 'General';
            const experience = document.getElementById('regExperience')?.value || '1 year';
            const city = document.getElementById('regCity')?.value || 'Not specified';
            
            if (!fullName || !email || !phone || !password) {
                alert('‚ùå Please fill in all required fields');
                return false;
            }
            
            // Check if email already exists
            const storedProviders = JSON.parse(localStorage.getItem('providerUsers') || '[]');
            if (storedProviders.find(p => p.email === email)) {
                alert('‚ùå An account with this email already exists. Please login instead.');
                return false;
            }
            
            // Create provider profile
            const providerProfile = {
                fullName: fullName,
                email: email,
                phone: phone,
                password: password,
                category: category,
                experience: experience,
                city: city,
                registeredAt: new Date().toISOString()
            };
            
            // Save to providerUsers array
            storedProviders.push(providerProfile);
            localStorage.setItem('providerUsers', JSON.stringify(storedProviders));
            
            // Save provider profile to localStorage
            localStorage.setItem('providerProfile', JSON.stringify(providerProfile));
            
            // Save login state
            localStorage.setItem('providerLoggedIn', 'true');
            
            console.log('‚úÖ Registration successful, redirecting...');
            alert('‚úÖ Registration successful! Redirecting to your dashboard...');
            
            setTimeout(() => {
                window.location.href = 'provider.html';
            }, 500);
            
            return false;
        }
        
        // Tab switching
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-btn');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById('loginTab').classList.remove('active');
            document.getElementById('registerTab').classList.remove('active');
            
            if (tabName === 'login') {
                tabs[0].classList.add('active');
                document.getElementById('loginTab').classList.add('active');
            } else {
                tabs[1].classList.add('active');
                document.getElementById('registerTab').classList.add('active');
            }
        }
        
        // Update navigation based on login status
        window.addEventListener('DOMContentLoaded', () => {
            // Check if already logged in
            const isLoggedIn = localStorage.getItem('providerLoggedIn');
            if (isLoggedIn === 'true') {
                console.log('‚ö†Ô∏è Already logged in as provider');
            }
        });
    </script>
</body>
</html>
