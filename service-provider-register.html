<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Provider Registration - Task Masters</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body.dark-mode { background: #0a0e1a; color: #ffffff; }
        body.dark-mode .modern-navbar { background: rgba(20, 40, 80, 0.95) !important; }
        body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4 { color: #ffffff; }
        body.dark-mode p, body.dark-mode span, body.dark-mode label, body.dark-mode small { color: #e0e8ff; }
        body.dark-mode .registration-container, body.dark-mode form { background: rgba(20, 40, 80, 0.4); border: 1px solid rgba(102, 126, 234, 0.3); }
        body.dark-mode input, body.dark-mode select, body.dark-mode textarea { background: rgba(30, 50, 90, 0.4); color: #ffffff; border: 2px solid rgba(102, 126, 234, 0.4); }
        body.dark-mode input:focus, body.dark-mode select:focus, body.dark-mode textarea:focus { border-color: rgba(102, 126, 234, 0.8); background: rgba(30, 50, 90, 0.5); }
        body.dark-mode .footer { background: rgba(15, 30, 60, 0.5); border-top: 1px solid rgba(102, 126, 234, 0.3); }
        body.dark-mode .footer h3, body.dark-mode .footer h4, body.dark-mode .footer p, body.dark-mode .footer a { color: #e0e8ff; }
        body.dark-mode .section-header { background: rgba(20, 40, 80, 0.4); border: 1px solid rgba(102, 126, 234, 0.3); }
        body.dark-mode .file-upload-box { background: rgba(30, 50, 90, 0.3); border: 2px dashed rgba(102, 126, 234, 0.4); }
        body.dark-mode [style*="background: white"], body.dark-mode [style*="background:white"] { background: rgba(20, 40, 80, 0.4) !important; }

        .registration-container {
            max-width: 900px;
            margin: 80px auto 40px;
            padding: 40px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .registration-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .registration-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .registration-header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .section-header {
            background: #f8f9fa;
            padding: 15px 20px;
            margin: 30px 0 20px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }

        .section-header h2 {
            margin: 0;
            font-size: 1.5em;
            color: #2c3e50;
        }

        .section-header p {
            margin: 5px 0 0;
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-row.three-col {
            grid-template-columns: 1fr 1fr 1fr;
        }

        .form-row.single {
            grid-template-columns: 1fr;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-help-text {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-top: 5px;
        }

        .file-upload-box {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            background: #f8f9fa;
            transition: all 0.3s;
            cursor: pointer;
        }

        .file-upload-box:hover {
            border-color: #007bff;
            background: #e7f3ff;
        }

        .file-upload-box.has-file {
            border-color: #28a745;
            background: #d4edda;
        }

        .file-upload-label {
            font-size: 1em;
            color: #2c3e50;
            margin-bottom: 10px;
            display: block;
        }

        .file-preview {
            margin-top: 10px;
            font-size: 0.9em;
            color: #28a745;
        }

        .agreement-box {
            background: #fff9e6;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
        }

        .agreement-box h3 {
            margin-top: 0;
            color: #856404;
        }

        .agreement-box ul {
            margin: 15px 0;
            padding-left: 20px;
        }

        .agreement-box li {
            margin: 8px 0;
            color: #856404;
        }

        .checkbox-label {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
            margin-top: 4px;
            width: auto;
            cursor: pointer;
        }

        .btn-submit-full {
            width: 100%;
            padding: 15px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 20px;
        }

        .btn-submit-full:hover {
            background: #0056b3;
        }

        .back-link {
            text-align: center;
            margin-top: 20px;
        }

        .back-link a {
            color: #007bff;
            text-decoration: none;
        }

        .back-link a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .form-row,
            .form-row.three-col {
                grid-template-columns: 1fr;
            }

            .registration-container {
                margin: 60px 20px 20px;
                padding: 20px;
            }
        }
    </style>
    <script>
        (function() {
            try {
                const custSettings = JSON.parse(localStorage.getItem('customerSettings') || '{}');
                const provSettings = JSON.parse(localStorage.getItem('providerSettings') || '{}');
                if (custSettings.darkMode === true || provSettings.darkMode === true) {
                    document.documentElement.classList.add('dark-mode');
                    document.body.classList.add('dark-mode');
                }
            } catch(e) {}
        })();
    </script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html"><h2>üéØ Task Masters</h2></a>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="index.html">Home</a>
                <a href="services-browse.html">Services</a>
                <a href="index.html#about">About</a>
                <a href="service-provider-login.html" class="btn-login">Login</a>
            </div>
        </div>
    </nav>

    <!-- Registration Section -->
    <div class="registration-container">
        <div class="registration-header">
            <h1>Service Provider Registration</h1>
            <p>Complete your professional profile to start earning with Task Masters</p>
        </div>

        <form id="providerRegistrationForm" onsubmit="handleRegistration(event)">
            <!-- Personal Information Section -->
            <div class="section-header">
                <h2>Personal Information</h2>
                <p>Provide your legal and preferred name details</p>
            </div>

            <div class="form-row three-col">
                <div class="form-group">
                    <label>Legal First Name</label>
                    <input type="text" id="legalFirstName" placeholder="Enter your legal first name" />
                    <div class="form-help-text">As shown on government ID</div>
                </div>
                <div class="form-group">
                    <label>Legal Middle Name</label>
                    <input type="text" id="legalMiddleName" placeholder="Enter your middle name" />
                    <div class="form-help-text">Optional</div>
                </div>
                <div class="form-group">
                    <label>Legal Last Name</label>
                    <input type="text" id="legalLastName" placeholder="Enter your legal last name" />
                    <div class="form-help-text">As shown on government ID</div>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Preferred Name</label>
                    <input type="text" id="preferredName" placeholder="What would you like to be called?" />
                    <div class="form-help-text">This will be shown to customers</div>
                </div>
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="emailAddress" placeholder="your@email.com" />
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="phoneNumber" placeholder="+1 (555) 123-4567" />
                </div>
                <div class="form-group">
                    <label>Date of Birth</label>
                    <input type="date" id="dateOfBirth" />
                </div>
            </div>

            <!-- Address Section -->
            <div class="section-header">
                <h2>Full Address</h2>
                <p>Your residential or business address</p>
            </div>

            <div class="form-row single">
                <div class="form-group">
                    <label>Street Address</label>
                    <input type="text" id="streetAddress" placeholder="123 Main Street" />
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Apartment/Unit Number</label>
                    <input type="text" id="unitNumber" placeholder="Apt 4B (optional)" />
                </div>
                <div class="form-group">
                    <label>City</label>
                    <input type="text" id="city" placeholder="Toronto" />
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Province/Territory</label>
                    <select id="province">
                        <option value="">Select Province/Territory</option>
                        <option value="AB">Alberta</option>
                        <option value="BC">British Columbia</option>
                        <option value="MB">Manitoba</option>
                        <option value="NB">New Brunswick</option>
                        <option value="NL">Newfoundland and Labrador</option>
                        <option value="NS">Nova Scotia</option>
                        <option value="ON">Ontario</option>
                        <option value="PE">Prince Edward Island</option>
                        <option value="QC">Quebec</option>
                        <option value="SK">Saskatchewan</option>
                        <option value="NT">Northwest Territories</option>
                        <option value="NU">Nunavut</option>
                        <option value="YT">Yukon</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Postal Code</label>
                    <input type="text" id="postalCode" placeholder="A1A 1A1" />
                </div>
            </div>

            <!-- Tax and Legal Information -->
            <div class="section-header">
                <h2>Tax & Legal Information</h2>
                <p>Required for payment processing and compliance</p>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Social Insurance Number (SIN)</label>
                    <input type="text" id="sinNumber" placeholder="123-456-789" maxlength="11" />
                    <div class="form-help-text">Required for tax reporting purposes. Your information is encrypted and secure.</div>
                </div>
                <div class="form-group">
                    <label>GST/HST Number</label>
                    <input type="text" id="gstNumber" placeholder="123456789RT0001" />
                    <div class="form-help-text">If applicable - required if you earn over $30,000 annually</div>
                </div>
            </div>

            <!-- Service Information -->
            <div class="section-header">
                <h2>Service Information</h2>
                <p>Tell us about your professional skills</p>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Service Category</label>
                    <select id="serviceCategory">
                        <option value="">Select your primary service</option>
                        <option value="cleaning">Home Cleaning</option>
                        <option value="plumbing">Plumbing</option>
                        <option value="electrical">Electrical Work</option>
                        <option value="carpentry">Carpentry</option>
                        <option value="painting">Painting</option>
                        <option value="beauty">Beauty & Salon</option>
                        <option value="tutoring">Tutoring</option>
                        <option value="pest">Pest Control</option>
                        <option value="ac">AC Repair</option>
                        <option value="babysitting">Babysitting</option>
                        <option value="moving">Moving & Packing</option>
                        <option value="fitness">Personal Training</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Years of Experience</label>
                    <input type="number" id="yearsExperience" placeholder="5" min="0" />
                </div>
            </div>

            <div class="form-row single">
                <div class="form-group">
                    <label>Brief Description of Services</label>
                    <textarea id="serviceDescription" placeholder="Describe your services, certifications, and what makes you stand out..."></textarea>
                </div>
            </div>

            <!-- Document Uploads -->
            <div class="section-header">
                <h2>Required Documents</h2>
                <p>Upload clear photos or scans of your identification documents</p>
            </div>

            <div class="form-group">
                <label>Proof of Eligibility to Work in Canada</label>
                <div class="file-upload-box" id="workEligibilityBox" onclick="document.getElementById('workEligibilityDoc').click()">
                    <input type="file" id="workEligibilityDoc" accept="image/*,.pdf" style="display: none;" onchange="handleFileUpload(this, 'workEligibilityBox', 'workEligibilityPreview')" />
                    <span class="file-upload-label">üìÑ Click to upload document</span>
                    <div class="form-help-text">Canadian Passport, Citizenship Card, Work Permit, or Permanent Resident Card</div>
                    <div id="workEligibilityPreview" class="file-preview"></div>
                </div>
            </div>

            <div class="form-group">
                <label>Government-Issued Photo ID #1</label>
                <div class="file-upload-box" id="photoId1Box" onclick="document.getElementById('photoId1').click()">
                    <input type="file" id="photoId1" accept="image/*,.pdf" style="display: none;" onchange="handleFileUpload(this, 'photoId1Box', 'photoId1Preview')" />
                    <span class="file-upload-label">üì∑ Click to upload photo ID</span>
                    <div class="form-help-text">Driver's License, Passport, or Photo Health Card</div>
                    <div id="photoId1Preview" class="file-preview"></div>
                </div>
            </div>

            <div class="form-group">
                <label>Government-Issued ID #2</label>
                <div class="file-upload-box" id="photoId2Box" onclick="document.getElementById('photoId2').click()">
                    <input type="file" id="photoId2" accept="image/*,.pdf" style="display: none;" onchange="handleFileUpload(this, 'photoId2Box', 'photoId2Preview')" />
                    <span class="file-upload-label">üÜî Click to upload second ID</span>
                    <div class="form-help-text">Can be any government-issued ID (one must be photo ID)</div>
                    <div id="photoId2Preview" class="file-preview"></div>
                </div>
            </div>

            <!-- Agreement Section -->
            <div class="agreement-box">
                <h3>‚öñÔ∏è Terms & Agreement</h3>
                <p>By registering as a service provider, you confirm and agree that:</p>
                <ul>
                    <li>All information provided above is accurate, complete, and truthful</li>
                    <li>You are legally eligible to work in Canada</li>
                    <li>You possess the necessary skills, qualifications, and certifications for the services you will provide</li>
                    <li>You will maintain professional standards and comply with all applicable laws and regulations</li>
                    <li>You understand that providing false information may result in account termination and potential legal action</li>
                    <li>You consent to background checks and verification of the information provided</li>
                    <li>You agree to Task Masters' <a href="terms.html" target="_blank">Terms of Service</a> and <a href="terms.html" target="_blank">Provider Agreement</a></li>
                </ul>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="agreementCheckbox" />
                        <span>I confirm that I have read, understood, and agree to all the terms stated above. I certify that all information provided is correct and accurate to the best of my knowledge.</span>
                    </label>
                </div>
            </div>

            <!-- Account Security -->
            <div class="section-header">
                <h2>Account Security</h2>
                <p>Create a secure password for your account</p>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" placeholder="Create a strong password" />
                    <div class="form-help-text">Minimum 8 characters, include letters and numbers</div>
                </div>
                <div class="form-group">
                    <label>Confirm Password</label>
                    <input type="password" id="confirmPassword" placeholder="Re-enter your password" />
                </div>
            </div>

            <button type="submit" class="btn-submit-full">Complete Registration</button>
        </form>

        <div class="back-link">
            <p>Already have an account? <a href="service-provider-login.html">Login here</a></p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>üéØ Task Masters</h3>
                <p>Your trusted service marketplace</p>
            </div>
            <div class="footer-section">
                <h4>Company</h4>
                <a href="index.html#about">About Us</a>
                <a href="careers.html">Careers</a>
                <a href="index.html">Press</a>
            </div>
            <div class="footer-section">
                <h4>Support</h4>
                <a href="help.html">Help Center</a>
                <a href="safety.html">Safety</a>
                <a href="terms.html">Terms of Service</a>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <a href="contact.html">Email Us</a>
                <a href="contact.html">Call: 1800-TASK-HELP</a>
                <a href="contact.html">Live Chat</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Task Masters. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // File upload handler
        function handleFileUpload(input, boxId, previewId) {
            const file = input.files[0];
            const box = document.getElementById(boxId);
            const preview = document.getElementById(previewId);
            
            if (file) {
                box.classList.add('has-file');
                preview.innerHTML = `‚úì ${file.name} (${(file.size / 1024).toFixed(1)} KB)`;
            } else {
                box.classList.remove('has-file');
                preview.innerHTML = '';
            }
        }

        // Format SIN number
        document.getElementById('sinNumber')?.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 3 && value.length <= 6) {
                value = value.slice(0, 3) + '-' + value.slice(3);
            } else if (value.length > 6) {
                value = value.slice(0, 3) + '-' + value.slice(3, 6) + '-' + value.slice(6, 9);
            }
            e.target.value = value;
        });

        // Format postal code
        document.getElementById('postalCode')?.addEventListener('input', function(e) {
            let value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
            if (value.length > 3) {
                value = value.slice(0, 3) + ' ' + value.slice(3, 6);
            }
            e.target.value = value;
        });

        // Registration form handler
        function handleRegistration(event) {
            event.preventDefault();
            
            console.log('üìù Processing registration...');

            // Collect all form data
            const formData = {
                // Personal Information
                legalFirstName: document.getElementById('legalFirstName').value,
                legalMiddleName: document.getElementById('legalMiddleName').value,
                legalLastName: document.getElementById('legalLastName').value,
                preferredName: document.getElementById('preferredName').value,
                email: document.getElementById('emailAddress').value,
                phone: document.getElementById('phoneNumber').value,
                dateOfBirth: document.getElementById('dateOfBirth').value,
                
                // Address
                streetAddress: document.getElementById('streetAddress').value,
                unitNumber: document.getElementById('unitNumber').value,
                city: document.getElementById('city').value,
                province: document.getElementById('province').value,
                postalCode: document.getElementById('postalCode').value,
                
                // Tax Information
                sinNumber: document.getElementById('sinNumber').value,
                gstNumber: document.getElementById('gstNumber').value,
                
                // Service Information
                serviceCategory: document.getElementById('serviceCategory').value,
                yearsExperience: document.getElementById('yearsExperience').value,
                serviceDescription: document.getElementById('serviceDescription').value,
                
                // Documents (file names only for now)
                workEligibilityDoc: document.getElementById('workEligibilityDoc').files[0]?.name || '',
                photoId1: document.getElementById('photoId1').files[0]?.name || '',
                photoId2: document.getElementById('photoId2').files[0]?.name || '',
                
                // Account
                password: document.getElementById('password').value,
                agreementAccepted: document.getElementById('agreementCheckbox').checked,
                
                // Metadata
                registeredAt: new Date().toISOString(),
                status: 'pending_verification'
            };

            // Validate passwords match
            const confirmPassword = document.getElementById('confirmPassword').value;
            if (formData.password !== confirmPassword) {
                alert('‚ùå Passwords do not match. Please try again.');
                return false;
            }

            // Check if email already exists
            const storedProviders = JSON.parse(localStorage.getItem('providerUsers') || '[]');
            if (storedProviders.find(p => p.email === formData.email)) {
                alert('‚ùå An account with this email already exists. Please login instead.');
                return false;
            }

            // Save to providerUsers array
            storedProviders.push(formData);
            localStorage.setItem('providerUsers', JSON.stringify(storedProviders));
            
            // Save provider profile
            localStorage.setItem('providerProfile', JSON.stringify(formData));
            localStorage.setItem('providerLoggedIn', 'true');

            console.log('‚úÖ Registration successful');
            alert('‚úÖ Registration completed successfully! Your profile is pending verification. You can now access your dashboard.');
            
            // Redirect to dashboard
            setTimeout(() => {
                window.location.href = 'provider.html';
            }, 1000);
            
            return false;
        }

        // Check if already logged in
        window.addEventListener('DOMContentLoaded', () => {
            const isLoggedIn = localStorage.getItem('providerLoggedIn');
            if (isLoggedIn === 'true') {
                if (confirm('You are already logged in. Would you like to go to your dashboard?')) {
                    window.location.href = 'provider.html';
                }
            }
        });
    </script>
</body>
</html>
