<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earnings - Provider Dashboard</title>
    <link rel="stylesheet" href="styles.css?v=15.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="provider.html" style="text-decoration: none;">
                    <div class="logo-wrapper">
                        <span class="logo-icon">üéØ</span>
                        <span class="logo-text">Task Masters</span>
                    </div>
                </a>
            </div>
            <div class="nav-actions">
                <a href="provider.html" class="nav-btn" style="display: flex; align-items: center; gap: 8px; padding: 12px 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 25px; text-decoration: none; color: white; font-weight: 600; font-size: 15px;">‚Üê Back to Dashboard</a>
            </div>
        </div>
    </nav>

    <div style="max-width: 1400px; margin: 40px auto; padding: 0 20px;">
        <h1 style="margin: 0 0 30px 0; font-size: 2.5em; color: #2c3e50;">üí∞ Earnings Overview</h1>

        <!-- Earnings Summary Cards -->
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 40px;">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 15px; color: white; box-shadow: 0 4px 15px rgba(102,126,234,0.3);">
                <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 10px;">üìÖ This Week</div>
                <div style="font-size: 2.2em; font-weight: bold;" id="weeklyEarning">$0</div>
            </div>
            <div style="background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%); padding: 30px; border-radius: 15px; color: white; box-shadow: 0 4px 15px rgba(76,175,80,0.3);">
                <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 10px;">üìä This Month</div>
                <div style="font-size: 2.2em; font-weight: bold;" id="monthlyEarning">$0</div>
            </div>
            <div style="background: linear-gradient(135deg, #ff9800 0%, #ffa726 100%); padding: 30px; border-radius: 15px; color: white; box-shadow: 0 4px 15px rgba(255,152,0,0.3);">
                <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 10px;">üìà This Quarter</div>
                <div style="font-size: 2.2em; font-weight: bold;" id="quarterlyEarning">$0</div>
            </div>
            <div style="background: linear-gradient(135deg, #f44336 0%, #e57373 100%); padding: 30px; border-radius: 15px; color: white; box-shadow: 0 4px 15px rgba(244,67,54,0.3);">
                <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 10px;">üéØ This Year</div>
                <div style="font-size: 2.2em; font-weight: bold;" id="yearlyEarning">$0</div>
            </div>
        </div>

        <!-- Custom Date Range -->
        <div style="background: white; padding: 30px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 30px;">
            <h2 style="margin: 0 0 20px 0; color: #2c3e50;">üìÜ Custom Date Range</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 20px; align-items: end;">
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #666;">From Date</label>
                    <input type="date" id="fromDate" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #666;">To Date</label>
                    <input type="date" id="toDate" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1em;">
                </div>
                <div>
                    <button onclick="calculateCustomRange()" style="padding: 12px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 1em;">Calculate</button>
                </div>
            </div>
            <div id="customRangeResult" style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 10px; display: none;">
                <div style="font-size: 1.1em; color: #666; margin-bottom: 8px;">Earnings for Selected Period:</div>
                <div style="font-size: 2.5em; font-weight: bold; color: #667eea;" id="customRangeAmount">$0</div>
            </div>
        </div>

        <!-- Earnings Line Chart -->
        <div style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 30px;">
            <h2 style="margin: 0 0 25px 0; color: #2c3e50;">üìà Earnings Trend (Last 12 Months)</h2>
            <canvas id="earningsLineChart" height="80"></canvas>
        </div>

        <!-- Earnings Calendar -->
        <div style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.08);">
            <h2 style="margin: 0 0 25px 0; color: #2c3e50;">üìÖ Earnings Calendar</h2>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <button onclick="changeMonth(-1)" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">‚Üê Previous</button>
                <h3 id="calendarMonth" style="margin: 0; color: #2c3e50;">January 2026</h3>
                <button onclick="changeMonth(1)" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Next ‚Üí</button>
            </div>
            <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px;">
                <div style="text-align: center; font-weight: 600; color: #666; padding: 10px;">Sun</div>
                <div style="text-align: center; font-weight: 600; color: #666; padding: 10px;">Mon</div>
                <div style="text-align: center; font-weight: 600; color: #666; padding: 10px;">Tue</div>
                <div style="text-align: center; font-weight: 600; color: #666; padding: 10px;">Wed</div>
                <div style="text-align: center; font-weight: 600; color: #666; padding: 10px;">Thu</div>
                <div style="text-align: center; font-weight: 600; color: #666; padding: 10px;">Fri</div>
                <div style="text-align: center; font-weight: 600; color: #666; padding: 10px;">Sat</div>
            </div>
            <div id="calendarDays" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px;"></div>
        </div>
    </div>

    <script>
        let currentCalendarDate = new Date();

    <script>
        let currentCalendarDate = new Date();
        const earningsData = {}; // Will store earnings by date

        // Initialize earnings summary
        updateEarningsSummary();

        // Create line chart
        createLineChart();

        // Initialize calendar
        renderCalendar();

        function updateEarningsSummary() {
            // Calculate earnings for different periods
            // This will be populated with real data from bookings
            document.getElementById('weeklyEarning').textContent = '$0';
            document.getElementById('monthlyEarning').textContent = '$0';
            document.getElementById('quarterlyEarning').textContent = '$0';
            document.getElementById('yearlyEarning').textContent = '$0';
        }

        function createLineChart() {
            const currentDate = new Date();
            const monthlyLabels = [];
            const monthlyData = [];
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            for (let i = 11; i >= 0; i--) {
                const date = new Date(currentDate);
                date.setMonth(date.getMonth() - i);
                monthlyLabels.push(months[date.getMonth()]);
                monthlyData.push(0); // Will be populated with real data
            }

            new Chart(document.getElementById('earningsLineChart'), {
                type: 'line',
                data: {
                    labels: monthlyLabels,
                    datasets: [{
                        label: 'Monthly Earnings ($)',
                        data: monthlyData,
                        borderColor: 'rgba(102, 126, 234, 1)',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: true },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return '$' + context.parsed.y.toFixed(2);
                                }
                            }
                        }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value;
                                }
                            }
                        }
                    }
                }
            });
        }

        function renderCalendar() {
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            
            // Update month display
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            document.getElementById('calendarMonth').textContent = monthNames[month] + ' ' + year;
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Clear calendar
            const calendarDays = document.getElementById('calendarDays');
            calendarDays.innerHTML = '';
            
            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.style.padding = '15px';
                calendarDays.appendChild(emptyCell);
            }
            
            // Add days of month
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const earning = earningsData[dateStr] || 0;
                
                const dayCell = document.createElement('div');
                dayCell.style.padding = '15px';
                dayCell.style.border = '1px solid #e0e0e0';
                dayCell.style.borderRadius = '8px';
                dayCell.style.textAlign = 'center';
                dayCell.style.cursor = 'pointer';
                dayCell.style.transition = 'all 0.3s';
                
                if (earning > 0) {
                    dayCell.style.background = 'linear-gradient(135deg, #4caf50 0%, #66bb6a 100%)';
                    dayCell.style.color = 'white';
                } else {
                    dayCell.style.background = '#f8f9fa';
                }
                
                dayCell.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 5px;">${day}</div>
                    <div style="font-size: 0.85em;">${earning > 0 ? '$' + earning.toFixed(2) : '$0'}</div>
                `;
                
                dayCell.onmouseover = function() {
                    this.style.transform = 'scale(1.05)';
                    this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
                };
                dayCell.onmouseout = function() {
                    this.style.transform = 'scale(1)';
                    this.style.boxShadow = 'none';
                };
                
                calendarDays.appendChild(dayCell);
            }
        }

        function changeMonth(direction) {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth() + direction);
            renderCalendar();
        }

        function calculateCustomRange() {
            const fromDate = document.getElementById('fromDate').value;
            const toDate = document.getElementById('toDate').value;
            
            if (!fromDate || !toDate) {
                alert('Please select both From and To dates');
                return;
            }
            
            if (new Date(fromDate) > new Date(toDate)) {
                alert('From date must be before To date');
                return;
            }
            
            // Calculate earnings for the selected range
            // This will be populated with real data from bookings
            let totalEarnings = 0;
            
            // Show result
            const resultDiv = document.getElementById('customRangeResult');
            resultDiv.style.display = 'block';
            document.getElementById('customRangeAmount').textContent = '$' + totalEarnings.toFixed(2);
        }
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>üéØ Task Masters</h3>
                <p>Your trusted service marketplace</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Task Masters. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
